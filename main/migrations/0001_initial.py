# Generated by Django 5.2.8 on 2025-11-12 21:38

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AdmissionRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('last_name', models.CharField(max_length=128, verbose_name='–§–∞–º–∏–ª–∏—è')),
                ('first_name', models.CharField(max_length=128, verbose_name='–ò–º—è')),
                ('middle_name', models.CharField(blank=True, max_length=128, verbose_name='–û—Ç—á–µ—Å—Ç–≤–æ')),
                ('email', models.EmailField(max_length=254, verbose_name='Email')),
                ('phone', models.CharField(max_length=20, verbose_name='–¢–µ–ª–µ—Ñ–æ–Ω')),
                ('desired_program', models.CharField(max_length=255, verbose_name='–ñ–µ–ª–∞–µ–º–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞')),
                ('study_form', models.CharField(choices=[('full_time', '–û—á–Ω–∞—è'), ('part_time', '–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è'), ('extramural', '–ó–∞–æ—á–Ω–∞—è')], default='full_time', max_length=20, verbose_name='–§–æ—Ä–º–∞ –æ–±—É—á–µ–Ω–∏—è')),
                ('previous_education', models.CharField(blank=True, max_length=255, verbose_name='–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ')),
                ('comments', models.TextField(blank=True, verbose_name='–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')),
                ('status', models.CharField(choices=[('new', '–ù–æ–≤–æ–µ'), ('review', '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏'), ('accepted', '–ü—Ä–∏–Ω—è—Ç–æ'), ('rejected', '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ')], default='new', max_length=20)),
            ],
            options={
                'verbose_name': '–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ',
                'verbose_name_plural': '–ó–∞—è–≤–ª–µ–Ω–∏—è –Ω–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ',
            },
        ),
        migrations.CreateModel(
            name='ApplicationRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('last_name', models.CharField(max_length=128, verbose_name='–§–∞–º–∏–ª–∏—è')),
                ('first_name', models.CharField(max_length=128, verbose_name='–ò–º—è')),
                ('middle_name', models.CharField(blank=True, max_length=128, verbose_name='–û—Ç—á–µ—Å—Ç–≤–æ')),
                ('email', models.EmailField(max_length=254, verbose_name='Email')),
                ('phone', models.CharField(max_length=20, verbose_name='–¢–µ–ª–µ—Ñ–æ–Ω')),
                ('desired_program', models.CharField(max_length=255, verbose_name='–ñ–µ–ª–∞–µ–º–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞')),
                ('study_form', models.CharField(choices=[('full_time', '–û—á–Ω–∞—è'), ('part_time', '–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è'), ('extramural', '–ó–∞–æ—á–Ω–∞—è')], default='full_time', max_length=20, verbose_name='–§–æ—Ä–º–∞ –æ–±—É—á–µ–Ω–∏—è')),
                ('previous_education', models.CharField(blank=True, max_length=255, verbose_name='–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ')),
                ('comments', models.TextField(blank=True, verbose_name='–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')),
                ('status', models.CharField(choices=[('new', '–ù–æ–≤–æ–µ'), ('review', '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏'), ('accepted', '–ü—Ä–∏–Ω—è—Ç–æ'), ('rejected', '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ')], default='new', max_length=20)),
            ],
            options={
                'verbose_name': '–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ',
                'verbose_name_plural': '–ó–∞—è–≤–ª–µ–Ω–∏—è –Ω–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ',
            },
        ),
        migrations.CreateModel(
            name='Assessment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=255)),
                ('type', models.CharField(choices=[('hw', '–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ'), ('quiz', '–¢–µ—Å—Ç/–ö–≤–∏–∑'), ('lab', '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è'), ('exam', '–≠–∫–∑–∞–º–µ–Ω'), ('project', '–ü—Ä–æ–µ–∫—Ç'), ('other', '–î—Ä—É–≥–æ–µ')], max_length=16)),
                ('max_points', models.DecimalField(decimal_places=2, default=100, max_digits=6)),
                ('weight', models.DecimalField(decimal_places=2, default=1.0, help_text='–í–µ—Å –≤ –∏—Ç–æ–≥–æ–≤–æ–π –æ—Ü–µ–Ω–∫–µ (—Å—É–º–º–∞ –ø–æ –∫—É—Ä—Å—É –º–æ–∂–µ—Ç –±—ã—Ç—å 1.0 –∏–ª–∏ 100)', max_digits=5)),
                ('due_at', models.DateTimeField(blank=True, null=True)),
                ('is_final', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='Faculty',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=256)),
            ],
        ),
        migrations.CreateModel(
            name='HelpRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(choices=[('technical', '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞'), ('study', '–£—á–µ–±–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã'), ('schedule', '–ü—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º'), ('profile', '–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ—Ñ–∏–ª–µ–º'), ('other', '–î—Ä—É–≥–æ–µ')], default='technical', max_length=20)),
                ('email', models.EmailField(max_length=254, verbose_name='Email –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏')),
                ('subject', models.CharField(max_length=255, verbose_name='–¢–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è')),
                ('description', models.TextField(verbose_name='–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã')),
                ('priority', models.CharField(choices=[('low', '–ù–∏–∑–∫–∏–π'), ('medium', '–°—Ä–µ–¥–Ω–∏–π'), ('high', '–í—ã—Å–æ–∫–∏–π')], default='medium', max_length=10)),
                ('is_urgent', models.BooleanField(default=False, verbose_name='–°—Ä–æ—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')),
                ('status', models.CharField(choices=[('new', '–ù–æ–≤—ã–π'), ('in_progress', '–í —Ä–∞–±–æ—Ç–µ'), ('resolved', '–†–µ—à–µ–Ω–æ')], default='new', max_length=20)),
            ],
            options={
                'verbose_name': '–û–±—Ä–∞—â–µ–Ω–∏–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É',
                'verbose_name_plural': '–û–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É',
            },
        ),
        migrations.CreateModel(
            name='Role',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('permission', models.CharField(choices=[('Moderator_3lvl', '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä 3—É—Ä.'), ('Moderator_2lvl', '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä 2—É—Ä.'), ('Moderator_1lvl', '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä 1—É—Ä.'), ('Teacher', '–£—á–∏—Ç–µ–ª—å'), ('Journalist', '–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç'), ('Headman', '–ú–æ–¥–µ—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø—ã'), ('Student', '–°—Ç—É–¥–µ–Ω—Ç'), ('Applicant', '–ê–±–∏—Ç—É—Ä–∏–µ–Ω—Ç'), ('Guest', '–ì–æ—Å—Ç—å')], max_length=64)),
                ('name', models.CharField(max_length=32)),
            ],
        ),
        migrations.CreateModel(
            name='ScheduleSlot',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('weekday', models.PositiveSmallIntegerField(choices=[(1, '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫'), (2, '–í—Ç–æ—Ä–Ω–∏–∫'), (3, '–°—Ä–µ–¥–∞'), (4, '–ß–µ—Ç–≤–µ—Ä–≥'), (5, '–ü—è—Ç–Ω–∏—Ü–∞'), (6, '–°—É–±–±–æ—Ç–∞'), (7, '–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ')], verbose_name='–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏')),
                ('start_time', models.TimeField(verbose_name='–ù–∞—á–∞–ª–æ')),
                ('end_time', models.TimeField(verbose_name='–ö–æ–Ω–µ—Ü')),
                ('week_parity', models.CharField(choices=[('all', '–ö–∞–∂–¥—É—é'), ('odd', '–ù–µ—á—ë—Ç–Ω—ã–µ'), ('even', '–ß—ë—Ç–Ω—ã–µ')], default='all', max_length=5, verbose_name='–ß—ë—Ç–Ω–æ—Å—Ç—å –Ω–µ–¥–µ–ª–∏')),
                ('start_date', models.DateField(verbose_name='–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞')),
                ('end_date', models.DateField(verbose_name='–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞')),
                ('building', models.CharField(blank=True, max_length=64, verbose_name='–ö–æ—Ä–ø—É—Å')),
                ('room', models.CharField(blank=True, max_length=32, verbose_name='–ê—É–¥–∏—Ç–æ—Ä–∏—è')),
                ('note', models.CharField(blank=True, max_length=128, verbose_name='–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'ordering': ['weekday', 'start_time'],
            },
        ),
        migrations.CreateModel(
            name='University',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=256, unique=True, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞')),
                ('short_name', models.CharField(max_length=64, unique=True, verbose_name='–ö–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è')),
                ('city', models.CharField(blank=True, max_length=128, verbose_name='–ì–æ—Ä–æ–¥')),
                ('description', models.TextField(blank=True)),
                ('contact_email', models.EmailField(blank=True, max_length=254)),
            ],
        ),
        migrations.CreateModel(
            name='Discipline',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(blank=True, max_length=32)),
                ('title', models.CharField(max_length=256)),
                ('ects', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True)),
            ],
            options={
                'unique_together': {('code', 'title')},
            },
        ),
        migrations.CreateModel(
            name='Person',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('last_name', models.CharField(max_length=128, verbose_name='–§–∞–º–∏–ª–∏—è')),
                ('first_name', models.CharField(max_length=128, verbose_name='–ò–º—è')),
                ('middle_name', models.CharField(blank=True, max_length=128, verbose_name='–û—Ç—á–µ—Å—Ç–≤–æ')),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('phone', models.CharField(blank=True, max_length=32)),
                ('vk_user_id', models.CharField(blank=True, db_index=True, max_length=64, verbose_name='VK/Max user id')),
                ('user', models.OneToOneField(blank=True, help_text='–°–≤—è–∑—å —Å Django User (–µ—Å–ª–∏ –µ—Å—Ç—å)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='person', to=settings.AUTH_USER_MODEL)),
                ('role', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='role', to='main.role')),
            ],
        ),
        migrations.CreateModel(
            name='Program',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('code', models.CharField(blank=True, max_length=32)),
                ('duration_years', models.PositiveSmallIntegerField(default=4)),
                ('faculty', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='programs', to='main.faculty')),
            ],
            options={
                'unique_together': {('faculty', 'name')},
            },
        ),
        migrations.CreateModel(
            name='Curriculum',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('semester', models.PositiveSmallIntegerField(choices=[(1, '1'), (2, '2'), (3, '3'), (4, '4'), (5, '5'), (6, '6'), (7, '7'), (8, '8'), (9, '9'), (10, '10'), (11, '11'), (12, '12')])),
                ('hours', models.PositiveSmallIntegerField(default=0)),
                ('control_form', models.CharField(choices=[('exam', '–≠–∫–∑–∞–º–µ–Ω'), ('test', '–ó–∞—á–µ—Ç'), ('diff_test', '–î–∏—Ñ—Ñ. –∑–∞—á–µ—Ç')], default='exam', max_length=32)),
                ('discipline', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='curriculum_items', to='main.discipline')),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='curriculum', to='main.program')),
            ],
            options={
                'unique_together': {('program', 'discipline', 'semester')},
            },
        ),
        migrations.CreateModel(
            name='ScheduleException',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(verbose_name='–î–∞—Ç–∞')),
                ('action', models.CharField(choices=[('cancel', '–û—Ç–º–µ–Ω–∞'), ('move', '–ü–µ—Ä–µ–Ω–æ—Å'), ('change_room', '–°–º–µ–Ω–∞ –∞—É–¥–∏—Ç–æ—Ä–∏–∏/–ø—Ä–∏–º–µ—á–∞–Ω–∏—è')], max_length=12, verbose_name='–î–µ–π—Å—Ç–≤–∏–µ')),
                ('new_date', models.DateField(blank=True, null=True, verbose_name='–ù–æ–≤–∞—è –¥–∞—Ç–∞')),
                ('new_start_time', models.TimeField(blank=True, null=True, verbose_name='–ù–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ')),
                ('new_end_time', models.TimeField(blank=True, null=True, verbose_name='–ù–æ–≤—ã–π –∫–æ–Ω–µ—Ü')),
                ('new_building', models.CharField(blank=True, max_length=64, verbose_name='–ù–æ–≤—ã–π –∫–æ—Ä–ø—É—Å')),
                ('new_room', models.CharField(blank=True, max_length=32, verbose_name='–ù–æ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è')),
                ('new_note', models.CharField(blank=True, max_length=128, verbose_name='–ù–æ–≤–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('slot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='exceptions', to='main.scheduleslot', verbose_name='–Ø—á–µ–π–∫–∞')),
            ],
            options={
                'ordering': ['date', 'slot_id'],
            },
        ),
        migrations.CreateModel(
            name='Student',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('student_id', models.CharField(max_length=32, unique=True, verbose_name='–ù–æ–º–µ—Ä —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –±–∏–ª–µ—Ç–∞')),
                ('current_year', models.PositiveSmallIntegerField(help_text='–ö—É—Ä—Å (1..6)', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(6)])),
                ('admission_year', models.PositiveSmallIntegerField()),
                ('person', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='student', to='main.person')),
            ],
        ),
        migrations.CreateModel(
            name='AssessmentResult',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('attempt', models.PositiveSmallIntegerField(default=1)),
                ('points', models.DecimalField(decimal_places=2, max_digits=6, validators=[django.core.validators.MinValueValidator(0)])),
                ('graded_at', models.DateTimeField(auto_now_add=True)),
                ('grade_5', models.PositiveSmallIntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(2), django.core.validators.MaxValueValidator(5)])),
                ('grade_ects', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D'), ('E', 'E'), ('FX', 'FX'), ('F', 'F')], max_length=2)),
                ('assessment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='results', to='main.assessment')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assessment_results', to='main.student')),
            ],
        ),
        migrations.CreateModel(
            name='Applicant',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('birth_date', models.DateField(blank=True, null=True)),
                ('passport_number', models.CharField(blank=True, max_length=64)),
                ('address', models.CharField(blank=True, max_length=255)),
                ('school_name', models.CharField(blank=True, max_length=255)),
                ('graduation_year', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('person', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='applicant', to='main.person')),
                ('linked_student', models.OneToOneField(blank=True, help_text='–°–≤—è–∑—å –ø–æ—Å–ª–µ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è', null=True, on_delete=django.db.models.deletion.SET_NULL, to='main.student')),
            ],
        ),
        migrations.CreateModel(
            name='StudentGroup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=64)),
                ('admission_year', models.PositiveSmallIntegerField()),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='groups', to='main.program')),
            ],
        ),
        migrations.AddField(
            model_name='student',
            name='student_group',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='students', to='main.studentgroup'),
        ),
        migrations.AddField(
            model_name='scheduleslot',
            name='groups',
            field=models.ManyToManyField(blank=True, related_name='schedule_slots', to='main.studentgroup', verbose_name='–ì—Ä—É–ø–ø—ã'),
        ),
        migrations.CreateModel(
            name='StudentRole',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('role', models.CharField(choices=[('headman', '–°—Ç–∞—Ä–æ—Å—Ç–∞'), ('journalist', '–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç'), ('TUO', '–ü—Ä–æ—Ñ–æ—Ä–≥')], max_length=32)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField(blank=True, null=True)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='roles', to='main.student')),
            ],
        ),
        migrations.CreateModel(
            name='Teacher',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_title', models.CharField(blank=True, max_length=128)),
                ('department', models.CharField(blank=True, max_length=255)),
                ('person', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='teacher', to='main.person')),
                ('university', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='teachers', to='main.university')),
            ],
        ),
        migrations.AddField(
            model_name='studentgroup',
            name='curator',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='curating_groups', to='main.teacher'),
        ),
        migrations.CreateModel(
            name='Teaching',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=9)),
                ('semester_in_year', models.PositiveSmallIntegerField(choices=[(1, '–æ—Å–µ–Ω–Ω–∏–π'), (2, '–≤–µ—Å–µ–Ω–Ω–∏–π')])),
                ('curriculum', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='teachings', to='main.curriculum')),
                ('group', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='teachings', to='main.studentgroup')),
                ('teacher', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='teachings', to='main.teacher')),
            ],
        ),
        migrations.AddField(
            model_name='scheduleslot',
            name='teaching',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='schedule_slots', to='main.teaching', verbose_name='–ö—É—Ä—Å (Teaching)'),
        ),
        migrations.CreateModel(
            name='Enrollment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date_enrolled', models.DateField(auto_now_add=True)),
                ('is_active', models.BooleanField(default=True)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='enrollments', to='main.student')),
                ('teaching', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='enrollments', to='main.teaching')),
            ],
        ),
        migrations.AddField(
            model_name='assessment',
            name='teaching',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assessments', to='main.teaching'),
        ),
        migrations.CreateModel(
            name='TeacherRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type', models.CharField(choices=[('annual', '–ï–∂–µ–≥–æ–¥–Ω—ã–π –æ—Ç–ø—É—Å–∫'), ('sick', '–ë–æ–ª—å–Ω–∏—á–Ω—ã–π'), ('academic', '–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –æ—Ç–ø—É—Å–∫'), ('business', '–ö–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫–∞'), ('other', '–ò–Ω–æ–µ')], max_length=64)),
                ('status', models.CharField(choices=[('submitted', '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ'), ('in_review', '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏'), ('approved', '–û–¥–æ–±—Ä–µ–Ω–æ'), ('rejected', '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ')], default='submitted', max_length=16)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('payload_json', models.JSONField(blank=True, default=dict)),
                ('teacher', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='requests', to='main.teacher')),
                ('university', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='teacher_requests', to='main.university')),
            ],
        ),
        migrations.CreateModel(
            name='StudentRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('type', models.CharField(choices=[('certificate_enrollment', '–°–ø—Ä–∞–≤–∫–∞ –æ–± –æ–±—É—á–µ–Ω–∏–∏'), ('certificate_income', '–°–ø—Ä–∞–≤–∫–∞ –æ –¥–æ—Ö–æ–¥–∞—Ö/—Å—Ç–∏–ø–µ–Ω–¥–∏–∏'), ('dormitory', '–û–±—â–µ–∂–∏—Ç–∏–µ'), ('practice', '–ü—Ä–∞–∫—Ç–∏–∫–∞/—Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∞'), ('other', '–ü—Ä–æ—á–µ–µ')], max_length=64)),
                ('status', models.CharField(choices=[('draft', '–ß–µ—Ä–Ω–æ–≤–∏–∫'), ('submitted', '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ'), ('in_progress', '–í —Ä–∞–±–æ—Ç–µ'), ('approved', '–û–¥–æ–±—Ä–µ–Ω–æ'), ('rejected', '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ'), ('issued', '–í—ã–¥–∞–Ω–æ')], default='submitted', max_length=32)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('payload_json', models.JSONField(blank=True, default=dict)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='requests', to='main.student')),
                ('university', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_requests', to='main.university')),
            ],
        ),
        migrations.AddField(
            model_name='studentgroup',
            name='university',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='groups', to='main.university'),
        ),
        migrations.AddField(
            model_name='student',
            name='university',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='students', to='main.university'),
        ),
        migrations.AddField(
            model_name='scheduleslot',
            name='university',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='schedule_slots', to='main.university', verbose_name='–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç'),
        ),
        migrations.CreateModel(
            name='NewsPost',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('news_icon', models.CharField(max_length=8, verbose_name='–≠–º–æ–¥–∑–∏')),
                ('title', models.CharField(max_length=255, verbose_name='–ó–∞–≥–æ–ª–æ–≤–æ–∫')),
                ('body', models.TextField(verbose_name='–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('published_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('author', models.CharField(max_length=100, verbose_name='–ê–≤—Ç–æ—Ä')),
                ('cover_image', models.ImageField(blank=True, null=True, upload_to='news_covers/')),
                ('is_published', models.BooleanField(default=True)),
                ('university', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='news', to='main.university')),
            ],
            options={
                'ordering': ['-published_at'],
            },
        ),
        migrations.CreateModel(
            name='GroupNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('icon', models.CharField(blank=True, default='üîî', max_length=8, verbose_name='–ò–∫–æ–Ω–∫–∞/—ç–º–æ–¥–∑–∏')),
                ('text', models.TextField(max_length=500, verbose_name='–¢–µ–∫—Å—Ç')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('sender', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='sent_notifications', to='main.person')),
                ('group', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='main.studentgroup')),
                ('university', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='group_notifications', to='main.university')),
            ],
            options={
                'verbose_name': '–ì—Ä—É–ø–ø–æ–≤–æ–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ',
                'verbose_name_plural': '–ì—Ä—É–ø–ø–æ–≤—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='faculty',
            name='university',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='faculties', to='main.university'),
        ),
        migrations.CreateModel(
            name='ApplicantExam',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('subject', models.CharField(max_length=128)),
                ('exam_type', models.CharField(choices=[('USE', '–ï–ì–≠'), ('internal', '–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π'), ('other', '–î—Ä—É–≥–æ–µ')], default='USE', max_length=16)),
                ('score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('applicant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='exams', to='main.applicant')),
            ],
            options={
                'unique_together': {('applicant', 'subject', 'exam_type')},
            },
        ),
        migrations.AddIndex(
            model_name='person',
            index=models.Index(fields=['vk_user_id'], name='main_person_vk_user_8a42a4_idx'),
        ),
        migrations.AddIndex(
            model_name='scheduleexception',
            index=models.Index(fields=['date', 'action'], name='main_schedu_date_ad0a5d_idx'),
        ),
        migrations.AddIndex(
            model_name='assessmentresult',
            index=models.Index(fields=['student', 'graded_at'], name='main_assess_student_616ec7_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='assessmentresult',
            unique_together={('assessment', 'student', 'attempt')},
        ),
        migrations.AddIndex(
            model_name='studentrole',
            index=models.Index(fields=['role', 'start_date'], name='main_studen_role_1c82f1_idx'),
        ),
        migrations.AddIndex(
            model_name='teaching',
            index=models.Index(fields=['academic_year'], name='main_teachi_academi_5fecce_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='teaching',
            unique_together={('teacher', 'curriculum', 'group', 'academic_year')},
        ),
        migrations.AddIndex(
            model_name='enrollment',
            index=models.Index(fields=['is_active'], name='main_enroll_is_acti_958dd0_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='enrollment',
            unique_together={('student', 'teaching')},
        ),
        migrations.AddIndex(
            model_name='studentgroup',
            index=models.Index(fields=['admission_year'], name='main_studen_admissi_9ee645_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentgroup',
            unique_together={('program', 'name')},
        ),
        migrations.AddIndex(
            model_name='scheduleslot',
            index=models.Index(fields=['university', 'weekday', 'start_time'], name='main_schedu_univers_b174f6_idx'),
        ),
        migrations.AddIndex(
            model_name='scheduleslot',
            index=models.Index(fields=['start_date', 'end_date'], name='main_schedu_start_d_5790e3_idx'),
        ),
        migrations.AddIndex(
            model_name='groupnotification',
            index=models.Index(fields=['group', 'created_at'], name='main_groupn_group_i_5dd7b1_idx'),
        ),
    ]
