{% load pagination %}

<nav class="paginator" aria-label="Пагинация">
    {% if page_obj.has_previous %}
        <a class="page-btn page-btn--ghost" href="{% page_url request 1 %}" aria-disabled="false">«</a>
    {% else %}
        <span class="page-btn page-btn--ghost is-disabled" aria-disabled="true">«</span>
    {% endif %}

    {% if page_obj.has_previous %}
        <a class="page-btn page-btn--ghost" href="{% page_url request page_obj.previous_page_number %}"
           aria-disabled="false">←</a>
    {% else %}
        <span class="page-btn page-btn--ghost is-disabled" aria-disabled="true">←</span>
    {% endif %}

    {% if page_obj.number|add:'-2' > 1 %}
        <a class="page-btn" href="{% page_url request 1 %}">1</a>
        <span class="page-gap" aria-hidden="true">…</span>
    {% endif %}

    {% for i in paginator.page_range %}
        {% if i >= page_obj.number|add:'-2' and i <= page_obj.number|add:'2' %}
            {% if i == page_obj.number %}
                <span class="page-btn is-active" aria-current="page">{{ i }}</span>
            {% else %}
                <a class="page-btn" href="{% page_url request i %}">{{ i }}</a>
            {% endif %}
        {% endif %}
    {% endfor %}

    {% if page_obj.number|add:'2' < paginator.num_pages %}
        <span class="page-gap" aria-hidden="true">…</span>
        <a class="page-btn" href="{% page_url request paginator.num_pages %}">{{ paginator.num_pages }}</a>
    {% endif %}

    {% if page_obj.has_next %}
        <a class="page-btn page-btn--ghost" href="{% page_url request page_obj.next_page_number %}"
           aria-disabled="false">→</a>
    {% else %}
        <span class="page-btn page-btn--ghost is-disabled" aria-disabled="true">→</span>
    {% endif %}

    {% if page_obj.has_next %}
        <a class="page-btn page-btn--ghost" href="{% page_url request paginator.num_pages %}" aria-disabled="false">»</a>
    {% else %}
        <span class="page-btn page-btn--ghost is-disabled" aria-disabled="true">»</span>
    {% endif %}
</nav>
