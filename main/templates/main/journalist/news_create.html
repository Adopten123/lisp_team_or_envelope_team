{% extends 'main/index.html' %}
{% load static %}

{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'css/news_add.css' %}">
{% endblock %}

{% block content %}
<main class="main-content">
    <!-- –°—Ç–∞—Ç—É—Å –∂—É—Ä–Ω–∞–ª–∏—Å—Ç–∞ -->
    <section class="journalist-status">
        <div class="status-card">
            <div class="status-icon">üë®‚Äçüíº</div>
            <div class="status-info">
                <h3 id="journalistName">{{ person }}</h3>
                <p>–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ—Å—Å-—Ü–µ–Ω—Ç—Ä–∞</p>
                <div class="stats">
                    <span class="stat" id="newsCount">üìä –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ posts_count }}</span>
                    <span class="stat">‚≠ê –†–æ–ª—å: {{ person.role }}</span>
                </div>
            </div>
        </div>
    </section>

    <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏ -->
    <section class="news-creation">
        <h2 class="section-title">
            <span class="section-icon">‚úçÔ∏è</span>
            –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å
        </h2>

        <form id="newsForm" class="news-form" method="POST" enctype="multipart/form-data" action="">
            {% csrf_token %}
            
            <!-- –≠–º–æ–¥–∑–∏ –¥–ª—è –Ω–æ–≤–æ—Å—Ç–∏ -->
            <div class="form-group">
                <label for="newsIcon" class="form-label">
                    <span class="label-icon">üé®</span>
                    –≠–º–æ–¥–∑–∏ –¥–ª—è –Ω–æ–≤–æ—Å—Ç–∏
                </label>
                <input 
                    type="text" 
                    id="newsIcon" 
                    name="news_icon"
                    class="form-input" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ —ç–º–æ–∑–¥–∏ –¥–ª—è –Ω–æ–≤–æ—Å—Ç–∏..."
                    maxlength="8"
                    required
                    value=""
                >
            </div>

            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏ -->
            <div class="form-group">
                <label for="newsTitle" class="form-label">
                    <span class="label-icon">üìù</span>
                    –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏
                </label>
                <input 
                    type="text" 
                    id="newsTitle" 
                    name="title"
                    class="form-input" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏..."
                    maxlength="255"
                    required
                >
                <div class="char-counter" id="titleCounter">0/255</div>
            </div>

            <!-- –¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏ -->
            <div class="form-group">
                <label for="newsContent" class="form-label">
                    <span class="label-icon">üìÑ</span>
                    –¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏
                </label>
                <textarea 
                    id="newsContent" 
                    name="body"
                    class="form-textarea" 
                    placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏..."
                    rows="8"
                    required
                ></textarea>
            </div>

            <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ -->
            <div class="form-group">
                <label class="form-label">
                    <span class="label-icon">üñºÔ∏è</span>
                    –û–±–ª–æ–∂–∫–∞ –Ω–æ–≤–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                </label>
                <div class="image-upload">
                    <input type="file" id="newsImage" name="cover_image" accept="image/*" class="file-input" hidden>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìÅ</div>
                        <div class="upload-text">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                        <div class="upload-hint">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 1200√ó600px</div>
                    </div>
                    <div class="image-preview" id="imagePreview" style="display: none;">
                        <img id="previewImg" src="" alt="Preview">
                        <button type="button" class="remove-image" id="removeImage">‚ùå</button>
                    </div>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="previewNews">
                    <span class="btn-icon">üëÅÔ∏è</span>
                    –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                </button>
                <button type="submit" class="btn btn-primary" id="publishNews">
                    <span class="btn-icon">üöÄ</span>
                    –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
                </button>
            </div>
        </form>
    </section>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏ -->
    <section class="news-management">
        <h2 class="section-title">
            <span class="section-icon">üìã</span>
            –ú–æ–∏ –Ω–æ–≤–æ—Å—Ç–∏
        </h2>

        <div class="news-list" id="publishedNewsList">
            <!-- –°–ø–∏—Å–æ–∫ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∑–¥–µ—Å—å -->
            <div class="loading-text">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</div>
        </div>
    </section>
</main>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
<div class="modal" id="previewModal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–æ–≤–æ—Å—Ç–∏</h3>
            <button class="modal-close" id="closePreview">‚úï</button>
        </div>
        <div class="modal-body">
            <div class="news-preview-content">
                <div class="preview-icon" id="previewIcon">üì¢</div>
                <h2 id="previewTitle">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏</h2>
                <div class="preview-meta">
                    <span id="previewAuthor">–ê–≤—Ç–æ—Ä</span>
                    <span id="previewDate">–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</span>
                </div>
                <div class="preview-image" id="previewImageContainer" style="display: none;">
                    <img id="previewImage" src="" alt="Preview">
                </div>
                <div class="preview-text" id="previewText">
                    –¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏...
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" id="closePreviewBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
</div>

<script src="{% static 'js/journalist-news.js' %}"></script>
{% endblock %}